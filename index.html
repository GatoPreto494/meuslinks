<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciador de Links</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
            display: flex;
            justify-content: center;
            min-height: calc(100vh - 40px);
        }
        .main-container {
            display: flex;
            width: 100%;
            max-width: 1200px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        .left-panel {
            flex: 1;
            padding: 20px;
            border-right: 1px solid #eee;
        }
        .right-panel {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            max-height: calc(100vh - 80px);
        }
        .right-panel h2 {
            display: flex; /* Para alinhar o t√≠tulo com o bot√£o de modo edi√ß√£o */
            justify-content: space-between;
            align-items: center;
            margin-top: 0;
            color: #333;
        }
        input[type="text"], textarea {
            width: calc(100% - 22px);
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            background-color: #007BFF;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-right: 5px; /* Espa√ßamento entre bot√µes */
        }
        button:hover {
            background-color: #0056b3;
        }
        ul {
            list-style: none;
            padding: 0;
        }
        li {
            background-color: #e9e9e9;
            margin-bottom: 8px;
            padding: 10px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            word-break: break-all;
        }
        li.hidden {
            display: none;
        }
        li span {
            margin-right: 8px;
            font-weight: bold;
            flex-shrink: 0;
        }
        li a {
            color: #007BFF;
            text-decoration: none;
            cursor: pointer;
            flex-grow: 1;
            word-break: break-all;
        }
        li a:hover {
            text-decoration: underline;
        }
        .success-message {
            color: green;
            margin-top: 10px;
            font-weight: bold;
        }
        .actions {
            margin-left: auto;
            display: flex;
            gap: 5px;
            visibility: hidden; /* Inicialmente invis√≠vel */
            opacity: 0; /* Inicialmente transparente */
            transition: visibility 0s, opacity 0.3s ease-in-out; /* Transi√ß√£o suave */
        }
        .actions.visible {
            visibility: visible;
            opacity: 1;
        }
        .actions button {
            background: none;
            border: none;
            padding: 0;
            cursor: pointer;
            font-size: 18px;
            color: #555;
            margin-right: 0; /* Remove margem extra dos bot√µes de a√ß√£o */
        }
        .actions button:hover {
            color: #000;
        }
        .actions button.delete-btn {
            color: #dc3545;
        }
        .actions button.delete-btn:hover {
            color: #c82333;
        }
        /* Estilos para o modal de edi√ß√£o */
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            border-radius: 8px;
            width: 80%;
            max-width: 500px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .modal-content h3 {
            margin-top: 0;
            color: #333;
        }
        .modal-content input[type="text"] {
            width: calc(100% - 20px);
        }
        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 15px;
        }
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        .toggle-edit-mode-btn {
            background-color: #6c757d; /* Cor diferente para o bot√£o de modo edi√ß√£o */
            padding: 8px 12px;
            font-size: 14px;
        }
        .toggle-edit-mode-btn:hover {
            background-color: #5a6268;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="left-panel">
            <h1>Gerenciador de Links üîó</h1>
            <hr>
            <h2>Adicionar Link Unit√°rio</h2>
            <input type="text" id="singleLinkInput" placeholder="Cole o link aqui">
            <button onclick="addSingleLink()">Adicionar Link</button>
            <p id="singleSuccessMessage" class="success-message"></p>
            <hr>
            <h2>Adicionar V√°rios Links</h2>
            <textarea id="multipleLinksInput" rows="5" placeholder="Cole v√°rios links aqui, um por linha"></textarea>
            <button onclick="addMultipleLinks()">Adicionar Links</button>
            <p id="multipleSuccessMessage" class="success-message"></p>
        </div>

        <div class="right-panel">
            <h2>
                Lista de Links
                <button class="toggle-edit-mode-btn" onclick="toggleEditMode()">
                    Modo Edi√ß√£o
                </button>
            </h2>
            <ul id="linkList">
                </ul>
        </div>
    </div>

    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeEditModal()">&times;</span>
            <h3>Editar Link</h3>
            <input type="text" id="editLinkInput">
            <div class="modal-buttons">
                <button onclick="saveEditedLink()">Salvar</button>
                <button onclick="closeEditModal()" style="background-color: #6c757d;">Cancelar</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', loadLinks);

        let currentEditingLi = null;
        let isEditMode = false; // Vari√°vel para controlar o modo de edi√ß√£o

        function addSingleLink() {
            const input = document.getElementById('singleLinkInput');
            const url = input.value.trim();
            if (url) {
                addLinkToList(url);
                input.value = '';
                showSuccessMessage('singleSuccessMessage', 'Link adicionado com sucesso! üéâ');
            } else {
                alert('Por favor, insira um link.');
            }
        }

        function addMultipleLinks() {
            const textarea = document.getElementById('multipleLinksInput');
            const urls = textarea.value.trim().split('\n').filter(url => url.trim() !== '');
            if (urls.length > 0) {
                urls.forEach(url => addLinkToList(url.trim()));
                textarea.value = '';
                showSuccessMessage('multipleSuccessMessage', 'Links adicionados com sucesso! üéâ');
            } else {
                alert('Por favor, insira um ou mais links, um por linha.');
            }
        }

        function addLinkToList(url, isReloading = false) {
            const linkList = document.getElementById('linkList');
            const li = document.createElement('li');

            const linkElement = document.createElement('a');
            linkElement.href = '#';
            linkElement.textContent = url;
            linkElement.onclick = function(event) {
                event.preventDefault();
                copyToClipboard(url);
                li.classList.add('hidden');
            };

            const span = document.createElement('span');
            // Numera√ß√£o ser√° atualizada por updateLinkNumbering
            li.appendChild(span);

            li.appendChild(linkElement);

            const actionsDiv = document.createElement('div');
            actionsDiv.classList.add('actions');
            // Adiciona a classe 'visible' se o modo de edi√ß√£o j√° estiver ativo ao carregar
            if (isEditMode) {
                actionsDiv.classList.add('visible');
            }

            const editButton = document.createElement('button');
            editButton.innerHTML = '‚úèÔ∏è';
            editButton.title = 'Editar link';
            editButton.onclick = function() {
                openEditModal(li, url);
            };

            const deleteButton = document.createElement('button');
            deleteButton.innerHTML = 'üóëÔ∏è';
            deleteButton.title = 'Apagar link';
            deleteButton.classList.add('delete-btn');
            deleteButton.onclick = function() {
                if (confirm('Tem certeza que deseja apagar este link?')) {
                    deleteLink(li, url);
                }
            };

            actionsDiv.appendChild(editButton);
            actionsDiv.appendChild(deleteButton);
            li.appendChild(actionsDiv);

            linkList.appendChild(li);

            if (!isReloading) {
                saveLink(url);
                updateLinkNumbering(); // Atualiza a numera√ß√£o imediatamente ap√≥s adicionar
            }
        }

        function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
        }

        function showSuccessMessage(elementId, message) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            setTimeout(() => {
                element.textContent = '';
            }, 3000);
        }

        function saveLink(url) {
            let links = JSON.parse(localStorage.getItem('savedLinks')) || [];
            if (!links.includes(url)) {
                links.push(url);
                localStorage.setItem('savedLinks', JSON.stringify(links));
            }
        }

        function loadLinks() {
            let links = JSON.parse(localStorage.getItem('savedLinks')) || [];
            links.forEach(url => addLinkToList(url, true));
            updateLinkNumbering(); // Garante que a numera√ß√£o esteja correta ao carregar
        }

        function deleteLink(liElement, urlToDelete) {
            liElement.remove();
            let links = JSON.parse(localStorage.getItem('savedLinks')) || [];
            links = links.filter(url => url !== urlToDelete);
            localStorage.setItem('savedLinks', JSON.stringify(links));
            updateLinkNumbering();
        }

        function openEditModal(liElement, currentUrl) {
            currentEditingLi = liElement;
            const editLinkInput = document.getElementById('editLinkInput');
            editLinkInput.value = currentUrl;
            document.getElementById('editModal').style.display = 'flex';
        }

        function closeEditModal() {
            document.getElementById('editModal').style.display = 'none';
            currentEditingLi = null;
        }

        function saveEditedLink() {
            if (!currentEditingLi) return;

            const oldUrl = currentEditingLi.querySelector('a').textContent;
            const newUrl = document.getElementById('editLinkInput').value.trim();

            if (newUrl && newUrl !== oldUrl) {
                currentEditingLi.querySelector('a').textContent = newUrl;

                let links = JSON.parse(localStorage.getItem('savedLinks')) || [];
                const index = links.indexOf(oldUrl);
                if (index > -1) {
                    links[index] = newUrl;
                    localStorage.setItem('savedLinks', JSON.stringify(links));
                }
            }
            closeEditModal();
        }

        function updateLinkNumbering() {
            const linkList = document.getElementById('linkList');
            const listItems = linkList.querySelectorAll('li:not(.hidden)');
            listItems.forEach((li, index) => {
                const span = li.querySelector('span');
                if (span) {
                    span.textContent = `${index + 1}.`;
                }
            });
        }

        // Nova fun√ß√£o para alternar o modo de edi√ß√£o
        function toggleEditMode() {
            isEditMode = !isEditMode; // Inverte o estado
            const toggleButton = document.querySelector('.toggle-edit-mode-btn');
            const allActions = document.querySelectorAll('.actions');

            if (isEditMode) {
                toggleButton.textContent = 'Sair do Modo Edi√ß√£o';
                toggleButton.style.backgroundColor = '#dc3545'; /* Mudar cor para indicar modo ativo */
                allActions.forEach(actionDiv => actionDiv.classList.add('visible'));
            } else {
                toggleButton.textContent = 'Modo Edi√ß√£o';
                toggleButton.style.backgroundColor = '#6c757d';
                allActions.forEach(actionDiv => actionDiv.classList.remove('visible'));
            }
        }
    </script>
</body>
</html>
